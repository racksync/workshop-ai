# Session 3: AI Agentic (Agent)

<div class="text-center">
  <img src="../assets/images/ai-agent-concept.png" alt="AI Agent Concept" width="650" />
</div>

## แนะนำแนวคิด AI Agent

AI Agent คือระบบปัญญาประดิษฐ์ที่ไม่ได้เป็นเพียงแค่เครื่องมือที่คอยตอบสนองคำสั่ง แต่สามารถ "ลงมือทำ" หรือ "ดำเนินการ" เพื่อให้บรรลุเป้าหมายได้ด้วยตนเอง มีความแตกต่างอย่างมีนัยสำคัญจาก AI แบบดั้งเดิม

- **AI แบบ Reactive (ดั้งเดิม)**:
  - ทำงานในลักษณะตอบสนองต่อคำสั่ง (รับข้อมูล -> ประมวลผล -> ให้ผลลัพธ์)
  - ขอบเขตการทำงานจำกัดอยู่เฉพาะข้อมูลที่ได้รับ
  - ไม่สามารถริเริ่มดำเนินการใดๆ ด้วยตัวเอง

- **AI แบบ Agentic (Agent)**:
  - มีอิสระในการตัดสินใจ (Autonomous)
  - ทำงานโดยมุ่งเน้นที่เป้าหมาย (Goal-oriented) และวางแผนการทำงานเองได้ (Planning)
  - สามารถโต้ตอบและปรับตัวให้เข้ากับสภาพแวดล้อม (Environment interaction)
  - เรียนรู้และพัฒนาตัวเองจากประสบการณ์ได้ (Learning and adaptation)
  - มีความสามารถในการทำงานร่วมกับระบบอื่นๆ (System integration)

## องค์ประกอบสำคัญของ AI Agent

```mermaid
graph TD
    Agent(AI Agent) --> Brain[สมอง/LLM]
    Agent --> Goal[เป้าหมาย]
    Agent --> Memory[ความทรงจำ]
    Agent --> Tools[เครื่องมือ]
    Agent --> Planning[กลไกการวางแผน]
    
    Memory --> ST[Short-term memory]
    Memory --> LT[Long-term memory]
    
    Tools --> APIs[API ต่างๆ]
    Tools --> Search[เครื่องมือค้นหา]
    Tools --> Calc[ระบบการคำนวณ]
    Tools --> Code[ความสามารถในการเขียนโค้ด]
```

AI Agent ประกอบด้วยองค์ประกอบสำคัญที่ทำงานร่วมกันดังนี้:

1. **สมอง (Brain)**: ส่วนใหญ่เป็น Large Language Model (LLM) ที่ทำหน้าที่ประมวลผล คิดวิเคราะห์ และตัดสินใจ

2. **เป้าหมาย (Goal)**: ต้องกำหนดเป้าหมายชัดเจนให้ Agent ทราบว่าต้องทำอะไรให้สำเร็จ

3. **ความทรงจำ (Memory)**:
   - **ความจำระยะสั้น (Short-term memory)**: เก็บข้อมูลระหว่างการสนทนาหรือการทำงานปัจจุบัน
   - **ความจำระยะยาว (Long-term memory)**: เก็บข้อมูลไว้ใช้ในอนาคตและประสบการณ์ที่ผ่านมา

4. **เครื่องมือ (Tools)**: ความสามารถในการเรียกใช้เครื่องมือหรือบริการภายนอก เช่น:
   - การเชื่อมต่อกับ API ต่างๆ
   - เครื่องมือสืบค้นข้อมูล
   - ระบบคำนวณและวิเคราะห์
   - ความสามารถในการเขียนและแก้ไขโค้ด

5. **กลไกการวางแผน (Planning)**: ความสามารถในการแตกปัญหาซับซ้อนออกเป็นขั้นตอนย่อยๆ และจัดลำดับการทำงานอย่างเป็นระบบ

## รูปแบบของ AI Agent

```mermaid
flowchart TB
    subgraph "Multi-Agent System"
        direction TB
        A1[Agent 1] <--> A2[Agent 2]
        A1 <--> A3[Agent 3]
        A2 <--> A3
        A3 <--> A4[Agent 4]
        A4 <--> A1
    end
    
    subgraph "Single Agent"
        direction TB
        SA[Agent] --- T1[Tool 1]
        SA --- T2[Tool 2]
        SA --- T3[Tool 3]
    end
    
    subgraph "Hierarchical Agents"
        direction TB
        HA[Main Agent] --- HB1[Sub Agent 1]
        HA --- HB2[Sub Agent 2]
        HA --- HB3[Sub Agent 3]
    end
```

1. **Single Agent**: Agent เดี่ยวที่ทำงานโดยตรงเพื่อบรรลุเป้าหมายเฉพาะด้านใดด้านหนึ่ง

2. **Multi-Agent System**: ระบบที่มี Agent หลายตัวทำงานประสานกัน:
   - **Collaborative Agents**: กลุ่ม Agent ที่ร่วมมือกันแก้ปัญหาที่ซับซ้อน
   - **Competitive Agents**: Agent ที่แข่งขันกันเพื่อค้นหาวิธีแก้ปัญหาที่ดีที่สุด
   - **Hierarchical Agents**: ระบบ Agent แบบลำดับชั้น โดยมี Agent หลักคอยกำกับและมอบหมายงานให้ Agent รอง

3. **Specialized Agents**: Agent ที่มีความเชี่ยวชาญเฉพาะทาง เช่น:
   - Research Agent: เน้นการค้นคว้าและรวบรวมข้อมูลจากแหล่งต่างๆ
   - Coding Agent: เชี่ยวชาญในการเขียน แก้ไข และทดสอบโค้ด
   - Data Analysis Agent: เชี่ยวชาญด้านการวิเคราะห์ข้อมูลและสถิติ

## เครื่องมือและ Framework สำหรับการสร้าง Agent

ปัจจุบันมีเครื่องมือและ Framework หลากหลายที่ช่วยให้การพัฒนา AI Agent ทำได้สะดวกยิ่งขึ้น:

1. **LangChain**: Framework ยอดนิยมสำหรับสร้าง Agent โดยเชื่อมต่อกับโมเดลภาษา (LLM) หลากหลาย
   - มีระบบจัดการความจำ (Memory Systems) แบบต่างๆ
   - มีโมดูลเครื่องมือ (Tools) และชุดเครื่องมือ (Toolkit) สำเร็จรูป
   - สามารถสร้างลำดับการทำงาน (chains) ที่ซับซ้อนได้
   - รองรับ Agent หลากหลายรูปแบบ เช่น ReAct, Plan-and-Execute
   - [เอกสารอ้างอิง LangChain](https://python.langchain.com/docs/get_started/introduction)

2. **AutoGPT**: ระบบ Autonomous GPT ที่สามารถทำงานหลายขั้นตอนต่อเนื่องได้โดยอัตโนมัติ
   - กำหนดเป้าหมายและวางแผนการทำงานเองได้
   - มีระบบบันทึกข้อมูลและติดตามแผนการทำงาน
   - [GitHub AutoGPT](https://github.com/Significant-Gravitas/AutoGPT)

3. **Semantic Kernel**: Framework จาก Microsoft ที่ช่วยในการสร้าง AI Agent แบบ modular
   - ออกแบบมาให้ผสมผสาน AI เข้ากับแอปพลิเคชันที่มีอยู่ได้อย่างราบรื่น
   - ใช้งานง่ายกับภาษา C# และ Python
   - รองรับการเชื่อมต่อกับ OpenAI, Azure OpenAI และ Hugging Face
   - [GitHub Semantic Kernel](https://github.com/microsoft/semantic-kernel)

4. **AgentGPT**: แพลตฟอร์มสร้าง autonomous AI Agent ผ่านเว็บไซต์
   - ใช้งานได้ง่ายผ่านอินเทอร์เฟซเว็บ โดยไม่จำเป็นต้องเขียนโค้ด
   - เหมาะสำหรับทดลองแนวคิด Agent และเรียนรู้การทำงาน
   - [ทดลองใช้ AgentGPT](https://agentgpt.reworkd.ai/)

## วิธีการสร้าง AI Agent

### 1. การกำหนดเป้าหมายและขอบเขตที่ชัดเจน

ก่อนเริ่มพัฒนา Agent ควรกำหนดให้ชัดเจนว่า:
- Agent ควรมีความสามารถทำอะไรได้บ้าง
- อะไรคือข้อจำกัดหรือสิ่งที่ Agent ไม่ควรทำ
- ผลลัพธ์หรือเป้าหมายสุดท้ายที่คาดหวัง

### 2. การออกแบบโครงสร้าง Prompt

Agent ต้องมีคำสั่งพื้นฐาน (prompt) ที่ออกแบบอย่างรอบคอบ:

```
ตัวอย่าง Prompt Template สำหรับ AI Agent:

คุณเป็น {agent_role} ที่ช่วย {agent_purpose}

ความสามารถของคุณ:
1. {capability_1}
2. {capability_2}
...

ขั้นตอนการทำงานของคุณ:
1. วิเคราะห์คำขอของผู้ใช้
2. แยกปัญหาเป็นขั้นตอนย่อย
3. เลือกเครื่องมือที่เหมาะสม
4. ดำเนินการแต่ละขั้นตอน
5. สรุปผลลัพธ์

เครื่องมือที่คุณเข้าถึงได้:
{tool_1}: {tool_1_description}
{tool_2}: {tool_2_description}
...

กฎการทำงาน:
- {rule_1}
- {rule_2}
...
```

### 3. การสร้าง Chain of Thought และ ReAct Pattern

- **Chain of Thought (CoT)**: เป็นเทคนิคที่ให้ Agent แสดงกระบวนการคิดเป็นขั้นตอน
- **ReAct Pattern**: Reasoning และ Acting สลับกัน - คิด -> ลงมือทำ -> ประเมินผล -> คิดต่อ

### 4. การเชื่อมต่อกับ External Tools

เพื่อให้ Agent สามารถทำงานได้จริง ต้องเชื่อมต่อกับเครื่องมือภายนอก:
- API Connections
- Database Access
- File Systems
- Search Engines
- อื่นๆ ตามความต้องการ

## ตัวอย่าง Use Cases ของ AI Agent

### 1. Chatbot อัจฉริยะ
ไม่ใช่เพียงแค่ตอบคำถาม แต่สามารถดำเนินการต่างๆ ได้:
- จองร้านอาหารผ่านระบบจองออนไลน์
- สั่งซื้อสินค้าเมื่อลูกค้าแสดงความต้องการ
- แนะนำสินค้าโดยการวิเคราะห์ความต้องการและพฤติกรรมของลูกค้า

### 2. Personal Assistant
- จัดการตารางนัด โดยเชื่อมต่อกับปฏิทิน
- สรุปอีเมลและจัดลำดับความสำคัญ
- เตือนการประชุมและเตรียมข้อมูลที่เกี่ยวข้อง
- ค้นหาข้อมูลและสรุปเนื้อหาตามที่ร้องขอ

### 3. Data Analysis Assistant
- วิเคราะห์ข้อมูลจำนวนมาก
- สร้างรายงานอัตโนมัติ
- ค้นหาข้อมูลเชิงลึกและแนวโน้ม
- แสดงผลในรูปแบบกราฟหรือตาราง

### 4. Customer Service Agent
- ตอบคำถามทั่วไปโดยอัตโนมัติ
- ส่งต่อปัญหาที่ซับซ้อนให้กับมนุษย์
- ติดตามสถานะคำสั่งซื้อและแจ้งให้ลูกค้าทราบ
- ดำเนินการขอคืนสินค้าหรือขอเงินคืน

## การเชื่อมต่อ Agent กับ Automation Tool (เช่น n8n)

การนำ AI Agent มาทำงานร่วมกับเครื่องมือ Automation เช่น n8n จะช่วยเพิ่มความสามารถให้กับระบบอย่างมาก:

### แนวคิดการทำงานร่วมกัน:
- **AI Agent = สมอง**: ทำหน้าที่คิด วิเคราะห์ ตัดสินใจ
- **n8n = แขนขา**: ทำหน้าที่ดำเนินการตามที่ Agent ตัดสินใจ

### ตัวอย่างการทำงานร่วมกัน:

1. **รับข้อมูลจาก Trigger ใน n8n** (เช่น อีเมลเข้าใหม่, การกรอกฟอร์ม, เวลาที่กำหนด)
2. **ส่งข้อมูลไปยัง AI Agent** ผ่าน API (เช่น OpenAI API)
3. **AI Agent วิเคราะห์และตัดสินใจ** ว่าควรดำเนินการอย่างไร
4. **ส่งคำสั่งกลับมาที่ n8n** เพื่อดำเนินการต่อ
5. **n8n ทำงานตามคำสั่ง** (เช่น ส่งอีเมล, อัปเดตฐานข้อมูล, โพสต์ข้อความ)
6. **รายงานผลกลับไปที่ Agent** เพื่อการตัดสินใจในขั้นต่อไป

### ตัวอย่างการเชื่อมต่อ Workflow:

1. **Customer Support Agent**:
   ```
   n8n Trigger (อีเมลลูกค้าเข้า) → 
   → OpenAI API (AI Agent วิเคราะห์ปัญหา) → 
   → n8n ดำเนินการ (ตอบกลับอัตโนมัติ/สร้างติกเก็ต) →
   → ถ้าต้องเพิ่มข้อมูล กลับไปถาม AI Agent
   ```

2. **Data Monitoring Agent**:
   ```
   n8n Trigger (ข้อมูลจาก API/Database ทุก 1 ชั่วโมง) → 
   → OpenAI API (AI Agent ตรวจสอบความผิดปกติ) → 
   → n8n ดำเนินการ (แจ้งเตือน/บันทึกข้อมูล/แก้ไขอัตโนมัติ)
   ```

3. **Content Creation Agent**:
   ```
   n8n Trigger (มี Topic ใหม่ในระบบ) → 
   → OpenAI API (AI Agent สร้างเนื้อหา) → 
   → n8n ดำเนินการ (จัดรูปแบบ/โพสต์ลงบล็อก/โพสต์โซเชียลมีเดีย)
   ```

## ข้อควรระวังและความท้าทาย

### 1. การควบคุมและ Guardrails
- ต้องกำหนดขอบเขตการทำงานของ Agent ให้ชัดเจน
- ควรมีระบบตรวจสอบและอนุมัติสำหรับการทำงานที่มีผลกระทบสูง
- ออกแบบ "circuit breaker" เพื่อหยุด Agent เมื่อทำงานนอกขอบเขต

### 2. ความปลอดภัยของข้อมูล
- ระมัดระวังการส่งข้อมูลที่เป็นความลับไปยัง External API
- ใช้การเข้ารหัสและการพิสูจน์ตัวตนที่เหมาะสม
- ปฏิบัติตามกฎหมายคุ้มครองข้อมูลส่วนบุคคล (เช่น PDPA, GDPR)

### 3. การจัดการค่าใช้จ่าย
- การเรียกใช้ API มากเกินไปอาจนำไปสู่ค่าใช้จ่ายที่สูง
- ควรมีการตั้งค่าขีดจำกัดและการแจ้งเตือน
- ติดตามการใช้งานและประสิทธิภาพเพื่อปรับปรุง ROI

### 4. ความน่าเชื่อถือของ Agent
- AI Agent อาจให้ข้อมูลที่ไม่ถูกต้อง (Hallucination)
- ควรมีระบบตรวจสอบและยืนยันข้อมูลที่สำคัญ
- ใช้เทคนิคเช่น RAG เพื่อเพิ่มความแม่นยำ

## ประโยชน์ที่ผู้เรียนจะได้รับ:

- **เข้าใจแนวคิดและหลักการทำงานของ AI Agent**: สามารถแยกแยะความแตกต่างระหว่าง AI ทั่วไปกับ Agent ที่มีความสามารถในการตัดสินใจและดำเนินการ

- **สามารถออกแบบและพัฒนา AI Agent เบื้องต้น**: รู้จักองค์ประกอบสำคัญและแนวทางในการสร้าง AI Agent ที่ตอบโจทย์ความต้องการ

- **เห็นภาพรวมการทำงานร่วมกันระหว่าง AI และระบบอัตโนมัติ**: เข้าใจว่า AI Agent สามารถทำงานร่วมกับเครื่องมืออื่นๆ เช่น n8n เพื่อสร้างระบบอัตโนมัติที่ชาญฉลาด

- **สามารถประยุกต์ใช้ AI Agent ในองค์กรหรือธุรกิจ**: มีแนวคิดในการนำ AI Agent ไปใช้แก้ปัญหาหรือเพิ่มประสิทธิภาพในการทำงาน

## Next Steps:

- ลงมือปฏิบัติสร้าง AI Agent อย่างง่ายด้วย LangChain หรือ OpenAI API
- ทดลองเชื่อมต่อ AI Agent กับ n8n เพื่อสร้าง Workflow อัตโนมัติ
- ศึกษาเพิ่มเติมเกี่ยวกับการจัดการ Memory และ Context ของ Agent

## ทรัพยากรเพิ่มเติม

- [OpenAI Function Calling](https://platform.openai.com/docs/guides/function-calling)
- [LangChain Documentation](https://python.langchain.com/docs/get_started/introduction)
- [Semantic Kernel](https://github.com/microsoft/semantic-kernel)
- [AutoGPT](https://github.com/Significant-Gravitas/AutoGPT)
- [AgentGPT](https://agentgpt.reworkd.ai/)
